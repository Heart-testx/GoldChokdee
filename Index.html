<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô PDF */
        .pdf-content {
            padding: 25px;
            /* ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö A4 ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Bootstrap Grid */
            max-width: 794px; /* ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 210mm @ 96dpi */
            margin: auto;
            background-color: #fff; 
            font-family: 'Times New Roman', Arial, sans-serif;
            font-size: 11pt; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£ */
        }
        .header-title {
            font-size: 16pt;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            border-bottom: 3px double #000;
            padding-bottom: 5px;
        }
        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏´‡πâ‡∏î‡∏π‡πÄ‡∏õ‡πá‡∏ô Text ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô PDF */
        .pdf-content input, .pdf-content select, .pdf-content textarea {
            border: none;
            border-bottom: 1px solid #000;
            padding: 2px 0;
            height: auto;
            border-radius: 0;
            background-color: transparent;
            font-weight: bold; /* ‡πÄ‡∏ô‡πâ‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏Å */
        }
        .form-label {
            font-weight: normal;
            margin-bottom: 0;
            font-size: 10pt;
        }
        .data-label {
            font-weight: bold;
        }
        /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô */
        .signature-area {
            border-bottom: 1px solid #000;
            height: 60px; /* ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà */
            margin-top: 10px;
            margin-bottom: 5px;
            display: flex;
            align-items: flex-end;
            justify-content: center;
        }
        .signature-text {
            font-size: 10pt;
            color: #333;
            text-align: center;
            margin-top: 5px;
        }
        .table {
            font-size: 10pt;
        }
        .table th, .table td {
            padding: 0.2rem;
            vertical-align: middle;
        }
        #image-preview {
            border: 1px dashed #ccc;
            padding: 10px;
            margin-bottom: 15px;
        }
        #image-preview img {
            max-width: 100px; /* ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏†‡∏≤‡∏û‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ */
            max-height: 100px;
            border: 1px solid #ddd;
            padding: 1px;
        }
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£" ‡πÅ‡∏•‡∏∞ "X" ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏õ‡πá‡∏ô PDF */
        .btn-hide-pdf {
            display: block; /* ‡πÅ‡∏™‡∏î‡∏á‡∏õ‡∏Å‡∏ï‡∏¥ */
        }
        @media print {
            .btn-hide-pdf {
                display: none !important;
            }
        }
    </style>
</head>
<body>

<div class="container my-5">
    <div class="alert alert-info d-flex justify-content-between align-items-center">
        <span>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô PDF</span>
        <button id="generatePdfBtn" class="btn btn-primary" onclick="generatePDF()">
            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå PDF
        </button>
    </div>
    
    <div id="record-form" class="pdf-content shadow-lg">
        
        <div class="header-title">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤</div>

        <p class="mb-2"><strong>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ã‡∏∑‡πâ‡∏≠</strong></p>
        <p style="text-indent: 40px; text-align: justify;">‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤ (‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢) ‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏ï‡∏Å‡∏•‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ï‡∏≤‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ ‡πÇ‡∏î‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏°‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏†‡∏≤‡∏û‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</p>
        
        <div class="row g-2 mb-3">
            <div class="col-md-6">
                <label for="sellerName" class="form-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• ‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢:</label>
                <input type="text" class="form-control" id="sellerName" required>
            </div>
            <div class="col-md-6">
                <label for="sellerPhone" class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</label>
                <input type="tel" class="form-control" id="sellerPhone" required>
            </div>
            <div class="col-md-6">
                <label for="recordDate" class="form-label">‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤ ‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:</label>
                <input type="datetime-local" class="form-control" id="recordDate" required>
            </div>
            <div class="col-md-6">
                <label for="price" class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Å‡∏•‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢ (‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç):</label>
                <input type="number" class="form-control" id="price" required>
            </div>
        </div>

        <h5 class="h6 mt-3 mb-2" style="font-weight: bold;">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏°‡∏≤‡∏Ç‡∏≤‡∏¢:</h5>
        <div class="table-responsive">
            <table class="table table-sm table-bordered" id="metalTable">
                <thead class="table-light">
                    <tr>
                        <th style="width: 20%;">‡πÅ‡∏£‡πà</th>
                        <th style="width: 15%;">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (‡∏Å‡∏£‡∏±‡∏°)</th>
                        <th style="width: 15%;">% ‡∏Ç‡∏≠‡∏á‡πÅ‡∏£‡πà</th>
                        <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î / ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏Ç‡∏≠‡∏á‡∏ä‡∏¥‡πâ‡∏ô‡∏á‡∏≤‡∏ô</th>
                        <th class="btn-hide-pdf" style="width: 5%;">‡∏•‡∏ö</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="row-1">
                        <td>
                            <select class="form-select metal-type" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏£‡πà</option>
                                <option>‡∏ó‡∏≠‡∏á</option>
                                <option>‡πÅ‡∏£‡πà‡πÄ‡∏á‡∏¥‡∏ô</option>
                                <option>‡∏ô‡∏≤‡∏Å</option>
                                <option>‡πÅ‡∏û‡∏•‡∏ï‡∏ï‡∏¥‡∏ô‡∏±‡πà‡∏°</option>
                                <option>‡πÇ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏°</option>
                                <option>‡∏û‡∏≤‡∏£‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏°</option>
                            </select>
                        </td>
                        <td><input type="number" step="0.01" class="form-control item-weight" placeholder="0.00" required></td>
                        <td><input type="number" step="0.01" class="form-control item-percentage" placeholder="0.00" required></td>
                        <td><input type="text" class="form-control item-detail" required></td>
                        <td class="btn-hide-pdf text-center"><button type="button" class="btn btn-danger btn-sm" onclick="removeRow('row-1')">X</button></td>
                    </tr>
                </tbody>
            </table>
            <button type="button" class="btn btn-success btn-sm mb-3 btn-hide-pdf" onclick="addRow()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        </div>

        <h5 class="h6 mt-3 mb-2" style="font-weight: bold;">‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (‡∏Ç‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏≠‡∏°‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô):</h5>
        <div class="mb-3 btn-hide-pdf">
            <input class="form-control form-control-sm" type="file" id="photoUpload" accept="image/*" multiple onchange="handleImageUpload(event)">
        </div>
        <div id="image-preview" class="d-flex flex-wrap gap-2">
            </div>

        <p class="mt-4" style="text-align: justify; font-size: 10pt;">
            ‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏£‡∏±‡∏ö‡∏£‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤‡∏°‡∏µ‡∏Ñ‡πà‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏≥‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≤‡∏û‡πÄ‡∏à‡πâ‡∏≤‡πÄ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏¢‡∏¥‡∏ô‡∏¢‡∏≠‡∏°‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡∏•‡∏≤‡∏¢/‡∏´‡∏•‡∏≠‡∏°‡∏Ç‡∏≠‡∏á‡∏î‡∏±‡∏á‡∏Å‡∏•‡πà‡∏≤‡∏ß‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏£‡∏£‡∏π‡∏õ‡∏ï‡πà‡∏≠‡πÑ‡∏õ
        </p>

        <div class="row mt-4">
            <div class="col-6">
                <div class="signature-area"></div>
                <p class="signature-text">(...................................................................)</p>
                <p class="signature-text"><strong>‡∏•‡∏≤‡∏¢‡πÄ‡∏ã‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢</strong></p>
            </div>
            
      
       <p class="mt-4 text-center small text-muted">** ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢ ‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏±‡∏Å‡∏©‡∏≤‡πÑ‡∏ß‡πâ</p>
        
    </div>
    
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏ñ‡∏ß
    let rowCount = 1;

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    function addRow() {
        rowCount++;
        const tableBody = document.querySelector('#metalTable tbody');
        const newRowId = `row-${rowCount}`;
        const newRow = document.createElement('tr');
        newRow.id = newRowId;
        newRow.innerHTML = `
            <td>
                <select class="form-select metal-type" required>
                    <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏£‡πà</option>
                    <option>‡∏ó‡∏≠‡∏á</option>
                    <option>‡πÅ‡∏£‡πà‡πÄ‡∏á‡∏¥‡∏ô</option>
                    <option>‡∏ô‡∏≤‡∏Å</option>
                    <option>‡πÅ‡∏û‡∏•‡∏ï‡∏ï‡∏¥‡∏ô‡∏±‡πà‡∏°</option>
                    <option>‡πÇ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏°</option>
                    <option>‡∏û‡∏≤‡∏£‡∏≤‡πÄ‡∏î‡∏µ‡∏¢‡∏°</option>
                </select>
            </td>
            <td><input type="number" step="0.01" class="form-control item-weight" placeholder="0.00" required></td>
            <td><input type="number" step="0.01" class="form-control item-percentage" placeholder="0.00" required></td>
            <td><input type="text" class="form-control item-detail" required></td>
            <td class="btn-hide-pdf text-center"><button type="button" class="btn btn-danger btn-sm" onclick="removeRow('${newRowId}')">X</button></td>
        `;
        tableBody.appendChild(newRow);
    }

    // ‡∏•‡∏ö‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    function removeRow(rowId) {
        const row = document.getElementById(rowId);
        if (row) {
            row.remove();
        }
    }

    // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    function handleImageUpload(event) {
        const previewDiv = document.getElementById('image-preview');
        previewDiv.innerHTML = ''; 
        const files = event.target.files;

        if (files) {
            Array.from(files).forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    const imgContainer = document.createElement('div');
                    imgContainer.className = 'p-1';
                    
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.maxWidth = '100px'; 
                    img.style.maxHeight = '100px';
                    img.className = 'img-fluid';
                    imgContainer.appendChild(img);
                    previewDiv.appendChild(imgContainer);
                };
                reader.readAsDataURL(file);
            });
        }
    }

    // ‡∏™‡∏£‡πâ‡∏≤‡∏á PDF (‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡πÉ‡∏´‡πâ‡∏û‡∏≠‡∏î‡∏µ A4 ‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏≤‡∏Å‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô)
    async function generatePDF() {
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°
        const form = document.getElementById('record-form');
        const inputElements = form.querySelectorAll('input:not([type="file"]), select, textarea');
        let isValid = true;
        
        inputElements.forEach(input => {
            if (input.hasAttribute('required') && input.value.trim() === '') {
                isValid = false;
            }
        });
        
        if (!isValid) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á PDF!');
            return;
        }

        const element = document.getElementById('record-form');
        const sellerName = document.getElementById('sellerName').value || '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
        const dateString = new Date().toISOString().slice(0, 10);
        const fileName = `‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢_${sellerName}_${dateString}.pdf`;

        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('p', 'mm', 'a4'); 

        // ‡∏Ç‡∏ô‡∏≤‡∏î A4 ‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢ mm
        const a4Width = 210;
        const a4Height = 297;
        const margin = 10; 
        const contentWidth = a4Width - (2 * margin); // 190 mm

        // 1. ‡πÉ‡∏ä‡πâ html2canvas ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏õ‡∏•‡∏á HTML ‡πÄ‡∏õ‡πá‡∏ô Canvas (‡∏†‡∏≤‡∏û)
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ scale: 2 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡πÅ‡∏•‡∏∞‡πÉ‡∏ä‡πâ windowWidth/Height ‡∏Ç‡∏≠‡∏á element
        const canvas = await html2canvas(element, { 
            scale: 2, 
            logging: false, 
            useCORS: true,
            windowWidth: element.scrollWidth, 
            windowHeight: element.scrollHeight
        });

        // 2. ‡πÅ‡∏õ‡∏•‡∏á Canvas ‡πÄ‡∏õ‡πá‡∏ô Data URL
        const imgData = canvas.toDataURL('image/jpeg', 1.0); 

        // 3. ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì Scale ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡∏û‡∏≠‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ç‡∏≠‡∏á A4
        const canvasWidth = canvas.width;
        const canvasHeight = canvas.height;
        
        const imgWidth = contentWidth; // 190 mm
        const imgHeight = (canvasHeight * imgWidth) / canvasWidth; 

        // 4. ‡∏ß‡∏≤‡∏á‡∏†‡∏≤‡∏û‡∏ö‡∏ô PDF ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡πÅ‡∏ö‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤
        let heightLeft = imgHeight;
        let position = margin; 

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏†‡∏≤‡∏û‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
        pdf.addImage(imgData, 'JPEG', margin, position, imgWidth, imgHeight);
        
        // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏π‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÉ‡∏™‡πà‡∏†‡∏≤‡∏û‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏£‡∏Å
        heightLeft -= (a4Height - (2 * margin)); 

        // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô 1 ‡∏´‡∏ô‡πâ‡∏≤ A4 (‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡∏Å)
        while (heightLeft > 0) {
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Y ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏†‡∏≤‡∏û‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô
            position = (imgHeight - heightLeft) * -1 + margin; 
            pdf.addPage();
            pdf.addImage(imgData, 'JPEG', margin, position, imgWidth, imgHeight);
            heightLeft -= (a4Height - (2 * margin));
        }

        pdf.save(fileName);
        alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå PDF ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
    }
</script>

</body>
</html>
